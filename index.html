<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>SIMULADOR IDEB</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <style>
        html { font-size: 15px; }
        body { font-family: Arial, sans-serif; background: #f7f7fa; margin: 0; padding: 0;}
        .container { background: #fff; max-width: 900px; margin: 32px auto; padding: 30px 20px 16px 20px; border-radius: 16px; box-shadow: 0 2px 18px #0001; }
        .logos { display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px; }
        .logos .niteroi { height: 86px; max-width: 265px; }
        .logos .casa { height: 48px; max-width: 120px; }
        h1 { text-align: center; color: #195bb5; margin-bottom: 9px; font-size: 1.35em;}
        table { width: 100%; border-collapse: collapse; margin: 10px 0 5px 0; font-size: 1em;}
        th, td { border: 1px solid #d2d6e0; padding: 6px 4px; text-align: center;}
        th { background: #f0f4fa; font-weight: 600;}
        input[type="number"] { width: 65px; padding: 4px 5px; font-size: 0.98em; border: 1px solid #bbb; border-radius: 4px;}
        .botao { margin: 15px auto 7px auto; display: block; padding: 10px 22px; background: #195bb5; color: #fff; font-size: 1em; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;}
        .botao:hover { background: #195bb5dd; }
        .obs { font-size: 0.95em; margin-top: 16px; color: #333; background: #e9f2fd; padding: 7px 9px; border-radius: 6px;}
        .footer { text-align: center; margin-top: 20px; font-size: 0.93em; color: #888; }
        @media (max-width: 900px) {
            .container { padding: 3px; margin: 5px;}
            .logos .niteroi { height: 54px; max-width: 140px;}
            .logos .casa { height: 32px; max-width: 70px;}
            html { font-size: 13px; }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="logos">
        <img src="niteroi.png" alt="Prefeitura de Niterói" class="niteroi">
        <img src="casa.png" alt="Casa de Avaliação" class="casa">
    </div>
    <h1>SIMULADOR IDEB</h1>
    <form id="simuladorIDEB" autocomplete="off">
        <table>
            <tr>
                <th rowspan="2"></th>
                <th colspan="2">ANOS INICIAIS</th>
                <th colspan="2">ANOS FINAIS</th>
            </tr>
            <tr>
                <th>LP</th>
                <th>MAT</th>
                <th>LP</th>
                <th>MAT</th>
            </tr>
            <tr>
                <th>Média de Proficiência</th>
                <td><input type="number" step="0.01" min="0" max="400" id="lp_ini" placeholder="LP"></td>
                <td><input type="number" step="0.01" min="0" max="400" id="mat_ini" placeholder="MAT"></td>
                <td><input type="number" step="0.01" min="0" max="400" id="lp_fin" placeholder="LP"></td>
                <td><input type="number" step="0.01" min="0" max="400" id="mat_fin" placeholder="MAT"></td>
            </tr>
            <tr>
                <th>Nota Padronizada</th>
                <td id="nota_pad_ini_lp">-</td>
                <td id="nota_pad_ini_mat">-</td>
                <td id="nota_pad_fin_lp">-</td>
                <td id="nota_pad_fin_mat">-</td>
            </tr>
            <tr>
                <th>Taxa de Rendimento (%)</th>
                <td colspan="2">
                    <input type="number" step="0.01" min="0" max="100" id="rendimento_ini" placeholder="Ex: 93.2">
                </td>
                <td colspan="2">
                    <input type="number" step="0.01" min="0" max="100" id="rendimento_fin" placeholder="Ex: 91.5">
                </td>
            </tr>
            <tr>
                <th>IDEB</th>
                <td id="ideb_ini" colspan="2">0,0</td>
                <td id="ideb_fin" colspan="2">0,0</td>
            </tr>
        </table>
        <button class="botao" type="button" id="btnCalcular">Calcular</button>
    </form>
    <div class="obs">
        <b>Obs.:</b> Nível de Proficiência Adequado<br>
        <b>Anos Iniciais:</b> LP ≥ 200 | MAT ≥ 225<br>
        <b>Anos Finais:</b> LP ≥ 275 | MAT ≥ 300
    </div>
</div>
<div class="footer">
    Casa de Avaliação & Prefeitura de Niterói
</div>
<script>
function notaPadronizadaIniciais(proficiencia) {
    if (isNaN(proficiencia)) return "-";
    return (((proficiencia - 49) / (324 - 49)) * 10).toFixed(2).replace('.',',');
}
function notaPadronizadaFinais(proficiencia) {
    if (isNaN(proficiencia)) return "-";
    return (((proficiencia - 100) / (400 - 100)) * 10).toFixed(2).replace('.',',');
}

function calculaIDEB() {
    // Entradas
    const lp_ini = parseFloat(document.getElementById('lp_ini').value.replace(',','.'));
    const mat_ini = parseFloat(document.getElementById('mat_ini').value.replace(',','.'));
    const lp_fin = parseFloat(document.getElementById('lp_fin').value.replace(',','.'));
    const mat_fin = parseFloat(document.getElementById('mat_fin').value.replace(',','.'));
    const rendimento_ini = parseFloat(document.getElementById('rendimento_ini').value.replace(',','.'));
    const rendimento_fin = parseFloat(document.getElementById('rendimento_fin').value.replace(',','.'));

    // Nota Padronizada para cada disciplina
    document.getElementById('nota_pad_ini_lp').innerText = notaPadronizadaIniciais(lp_ini);
    document.getElementById('nota_pad_ini_mat').innerText = notaPadronizadaIniciais(mat_ini);
    document.getElementById('nota_pad_fin_lp').innerText = notaPadronizadaFinais(lp_fin);
    document.getElementById('nota_pad_fin_mat').innerText = notaPadronizadaFinais(mat_fin);

    // IDEB = (Taxa de rendimento x média das proficiências padronizadas) / 10
    let ideb_ini = "-", ideb_fin = "-";
    // Para IDEB usamos a média das notas padronizadas!
    const nota_ini_lp = parseFloat(notaPadronizadaIniciais(lp_ini).replace(',','.'));
    const nota_ini_mat = parseFloat(notaPadronizadaIniciais(mat_ini).replace(',','.'));
    if (!isNaN(rendimento_ini) && !isNaN(nota_ini_lp) && !isNaN(nota_ini_mat)) {
        const mediaIni = ((nota_ini_lp + nota_ini_mat) / 2);
        ideb_ini = ((rendimento_ini * mediaIni) / 10).toFixed(2).replace('.',',');
    }
    const nota_fin_lp = parseFloat(notaPadronizadaFinais(lp_fin).replace(',','.'));
    const nota_fin_mat = parseFloat(notaPadronizadaFinais(mat_fin).replace(',','.'));
    if (!isNaN(rendimento_fin) && !isNaN(nota_fin_lp) && !isNaN(nota_fin_mat)) {
        const mediaFin = ((nota_fin_lp + nota_fin_mat) / 2);
        ideb_fin = ((rendimento_fin * mediaFin) / 10).toFixed(2).replace('.',',');
    }
    document.getElementById('ideb_ini').innerText = ideb_ini;
    document.getElementById('ideb_fin').innerText = ideb_fin;
}

// Cálculo no clique do botão
document.getElementById('btnCalcular').addEventListener('click', calculaIDEB);

// Cálculo automático ao digitar
['lp_ini','mat_ini','lp_fin','mat_fin','rendimento_ini','rendimento_fin'].forEach(id => {
    document.getElementById(id).addEventListener('input', calculaIDEB);
});
</script>
</body>
</html>
